// セマンティックバージョニングの正規表現
// ^v : 'v' で始まる
// (\d+)\.(\d+)\.(\d+) : ドットで区切られた3つの数字グループ
// (\-[\da-z\.]+)? : オプションのプレリリース識別子（例: -alpha.1）
// (\+[\da-z\.]+)? : オプションのビルドメタデータ（例: +20230724）

import z from 'zod'

// $ : 文字列の終わり
const semverRegex =
  /^v?(\d+)\.(\d+)\.(\d+)(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?$/i

/**
 * 一般的なバージョン文字列（v1.2.3, 1.2.3など）を検証するZodスキーマ。
 * セマンティックバージョニングのルールに従います。
 */
export const versionSchema = z
  .string()
  .regex(
    semverRegex,
    '有効なバージョン形式ではありません。例: 1.2.3 または v1.2.3'
  )
